"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateInstanceId = exports.safeName = exports.resolveContextValue = exports.createFallbackFunction = void 0;
var os_1 = require("os");
function createFallbackFunction(name, context, fallback) {
    if (typeof fallback === 'function') {
        return function () { return fallback(name, context); };
    }
    if (typeof fallback === 'boolean') {
        return function () { return fallback; };
    }
    return function () { return false; };
}
exports.createFallbackFunction = createFallbackFunction;
function resolveContextValue(context, field) {
    if (context[field]) {
        return context[field];
    }
    if (context.properties && context.properties[field]) {
        return context.properties[field];
    }
    return undefined;
}
exports.resolveContextValue = resolveContextValue;
function safeName(str) {
    if (str === void 0) { str = ''; }
    return str.replace(/\//g, '_');
}
exports.safeName = safeName;
function generateInstanceId(instanceId) {
    if (instanceId) {
        return instanceId;
    }
    var info;
    try {
        info = (0, os_1.userInfo)();
    }
    catch (e) {
        // unable to read info;
    }
    var prefix = info
        ? info.username
        : "generated-".concat(Math.round(Math.random() * 1000000), "-").concat(process.pid);
    return "".concat(prefix, "-").concat((0, os_1.hostname)());
}
exports.generateInstanceId = generateInstanceId;
//# sourceMappingURL=helpers.js.map